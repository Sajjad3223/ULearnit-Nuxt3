<template>
  <div>
    <div class="flex flex-col lg:flex-row gap-4 lg:gap-12">
      <div class="flex flex-1 flex-col gap-4">
        <div class="flex flex-col p-6 justify-center space-y-2 border-2 border-gray-800 rounded-lg">
          <div class="flex items-center text-xl space-x-2 space-x-reverse">
            <svg class="scale-125" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.62 10.7516C17.19 10.7516 16.85 10.4016 16.85 9.98156C16.85 9.61156 16.48 8.84156 15.86 8.17156C15.25 7.52156 14.58 7.14156 14.02 7.14156C13.59 7.14156 13.25 6.79156 13.25 6.37156C13.25 5.95156 13.6 5.60156 14.02 5.60156C15.02 5.60156 16.07 6.14156 16.99 7.11156C17.85 8.02156 18.4 9.15156 18.4 9.97156C18.4 10.4016 18.05 10.7516 17.62 10.7516Z" fill="currentColor"/>
              <path d="M21.2298 10.75C20.7998 10.75 20.4598 10.4 20.4598 9.98C20.4598 6.43 17.5698 3.55 14.0298 3.55C13.5998 3.55 13.2598 3.2 13.2598 2.78C13.2598 2.36 13.5998 2 14.0198 2C18.4198 2 21.9998 5.58 21.9998 9.98C21.9998 10.4 21.6498 10.75 21.2298 10.75Z" fill="currentColor"/>
              <path d="M11.05 14.95L9.2 16.8C8.81 17.19 8.19 17.19 7.79 16.81C7.68 16.7 7.57 16.6 7.46 16.49C6.43 15.45 5.5 14.36 4.67 13.22C3.85 12.08 3.19 10.94 2.71 9.81C2.24 8.67 2 7.58 2 6.54C2 5.86 2.12 5.21 2.36 4.61C2.6 4 2.98 3.44 3.51 2.94C4.15 2.31 4.85 2 5.59 2C5.87 2 6.15 2.06 6.4 2.18C6.66 2.3 6.89 2.48 7.07 2.74L9.39 6.01C9.57 6.26 9.7 6.49 9.79 6.71C9.88 6.92 9.93 7.13 9.93 7.32C9.93 7.56 9.86 7.8 9.72 8.03C9.59 8.26 9.4 8.5 9.16 8.74L8.4 9.53C8.29 9.64 8.24 9.77 8.24 9.93C8.24 10.01 8.25 10.08 8.27 10.16C8.3 10.24 8.33 10.3 8.35 10.36C8.53 10.69 8.84 11.12 9.28 11.64C9.73 12.16 10.21 12.69 10.73 13.22C10.83 13.32 10.94 13.42 11.04 13.52C11.44 13.91 11.45 14.55 11.05 14.95Z" fill="currentColor"/>
              <path d="M21.9696 18.3291C21.9696 18.6091 21.9196 18.8991 21.8196 19.1791C21.7896 19.2591 21.7596 19.3391 21.7196 19.4191C21.5496 19.7791 21.3296 20.1191 21.0396 20.4391C20.5496 20.9791 20.0096 21.3691 19.3996 21.6191C19.3896 21.6191 19.3796 21.6291 19.3696 21.6291C18.7796 21.8691 18.1396 21.9991 17.4496 21.9991C16.4296 21.9991 15.3396 21.7591 14.1896 21.2691C13.0396 20.7791 11.8896 20.1191 10.7496 19.2891C10.3596 18.9991 9.96961 18.7091 9.59961 18.3991L12.8696 15.1291C13.1496 15.3391 13.3996 15.4991 13.6096 15.6091C13.6596 15.6291 13.7196 15.6591 13.7896 15.6891C13.8696 15.7191 13.9496 15.7291 14.0396 15.7291C14.2096 15.7291 14.3396 15.6691 14.4496 15.5591L15.2096 14.8091C15.4596 14.5591 15.6996 14.3691 15.9296 14.2491C16.1596 14.1091 16.3896 14.0391 16.6396 14.0391C16.8296 14.0391 17.0296 14.0791 17.2496 14.1691C17.4696 14.2591 17.6996 14.3891 17.9496 14.5591L21.2596 16.9091C21.5196 17.0891 21.6996 17.2991 21.8096 17.5491C21.9096 17.7991 21.9696 18.0491 21.9696 18.3291Z" fill="currentColor"/>
            </svg>
            <strong>راه های ارتباطی</strong>
          </div>
          <hr class="opacity-25">
          <div class="flex items-center space-x-2 space-x-reverse m-4">
            <span>ایمیل ارتباطی:</span>
            <span class="link font-sans tracking-wider">info@ulearnit.ir</span>
          </div>
          <div class="flex items-center space-x-2 space-x-reverse m-4">
            <span>تلفن تماس:</span>
            <span class="link font-sans tracking-wider">09384725237</span>
          </div>
          <div class="flex items-center space-x-2 space-x-reverse m-4">
            <span>آدرس:</span>
            <span>خراسان رضوی - تربت حیدریه - بایگ</span>
          </div>
        </div>
        <div class="flex flex-col p-6 justify-center space-y-2 border-2 border-gray-800 rounded-lg">
          <div class="flex items-center text-xl space-x-2 space-x-reverse">
            <svg class="scale-125" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.5119 5.85L13.5719 2.42C12.6019 1.86 11.4019 1.86 10.4219 2.42L4.49187 5.85C3.52187 6.41 2.92188 7.45 2.92188 8.58V15.42C2.92188 16.54 3.52187 17.58 4.49187 18.15L10.4319 21.58C11.4019 22.14 12.6019 22.14 13.5819 21.58L19.5219 18.15C20.4919 17.59 21.0919 16.55 21.0919 15.42V8.58C21.0819 7.45 20.4819 6.42 19.5119 5.85ZM12.0019 7.34C13.2919 7.34 14.3319 8.38 14.3319 9.67C14.3319 10.96 13.2919 12 12.0019 12C10.7119 12 9.67188 10.96 9.67188 9.67C9.67188 8.39 10.7119 7.34 12.0019 7.34ZM14.6819 16.66H9.32187C8.51187 16.66 8.04187 15.76 8.49187 15.09C9.17187 14.08 10.4919 13.4 12.0019 13.4C13.5119 13.4 14.8319 14.08 15.5119 15.09C15.9619 15.75 15.4819 16.66 14.6819 16.66Z" fill="currentColor"/>
            </svg>
            <strong>مدیر مؤسسه</strong>
          </div>
          <hr class="opacity-25">
          <div class="flex items-center space-x-2 space-x-reverse m-4">
            <span>نام و نام خانوادگی:</span>
            <span >سجاد میرشبی</span>
          </div>
          <div class="flex items-center space-x-2 space-x-reverse m-4">
            <span>تلفن تماس:</span>
            <span >09384725237</span>
          </div>
          <div class="flex items-center space-x-2 space-x-reverse m-4">
            <span>ایمیل:</span>
            <span >m.sajjad1378@gmail.com</span>
          </div>
        </div>
      </div>
      <Form @submit="submitForm" :validation-schema="contactUsSchema" class="flex w-full lg:w-3/5 flex-col space-y-2">
        <u-divider title="تماس با ما" />
        <u-alert>
          در صورتی که مشکل شما نیاز به پیگیری و دریافت پاسخ دارد، لطفا تیکت ثبت کنید.
        </u-alert>
        <base-input name="fullName" v-model="contactUsData.fullName" label="نام و نام خانوادگی" />
        <base-input name="phoneNumber" v-model="contactUsData.phoneNumber" label="شماره تلفن" max-length="11"/>
        <base-input name="email" v-model="contactUsData.email" label="ایمیل" />
        <base-input name="text" v-model="contactUsData.text" label="پیام شما" multiline />
        <base-button type="submit" class="w-1/2 mr-auto">ارسال پیام</base-button>
      </Form>
    </div>
  </div>
</template>

<script setup lang="ts">
import {Form} from 'vee-validate';
import * as Yup from 'yup';
import {ContactUsCommand} from "~/models/contactus/contactUsCommand";
import {CreateContact} from "~/services/admin/contactus.service";
import {errorAlert, successAlert} from "~/services/alert.service";

const contactUsSchema = Yup.object().shape({
  fullName:Yup.string().required('نام و نام خانوادگی را وارد کنید'),
  phoneNumber:Yup.string().required('شماره تلفن را وارد کنید').max(11,'شماره تلفن نامعتبر است'),
  email:Yup.string().email('ایمیل نامعتبر است').required('ایمیل را وارد کنید'),
  text:Yup.string().required('پیام خود را وارد کنید')
});

const contactUsData:ContactUsCommand = reactive({
  fullName:"",
  email:"",
  phoneNumber:"",
  text:""
});

const submitForm = async ()=>{
  const result = await CreateContact(contactUsData);
  if(result.isSuccess){
    successAlert('درخواست شما با موفقیت ارسال شد','در خواست شما بررسی و نتیجه به شما اعلام خواهد شد');
    contactUsData.fullName = '';
    contactUsData.email = '';
    contactUsData.phoneNumber = '';
    contactUsData.text = '';
  }else{
    errorAlert();
  }
}

</script>